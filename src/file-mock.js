// Mock file system for development
const mockFiles = {
  'index.md': `# Главная страница

Добро пожаловать в WebDAV Bookmarks!

## Быстрые ссылки

- [[Пример страницы]]
- [[Документация]]
- [[Настройки]]

## Последние обновления

- Добавлена поддержка темной темы
- Улучшена навигация с хлебными крошками
- Исправлены проблемы с wiki-ссылками

## Как использовать

1. Нажмите на иконку настроек (👤) для конфигурации
2. Используйте хлебные крошки для навигации
3. Кликайте на wiki-ссылки для перехода между страницами
4. Переключайте тему с помощью переключателя в настройках

---

*Это демо-контент для разработки. В реальном расширении здесь будут ваши закладки.*`,

  'Пример%20страницы.md': `# Пример страницы

Это пример wiki-страницы для демонстрации функциональности.

## Подзаголовок

Здесь может быть любой markdown контент:

- Списки
- **Жирный текст**
- *Курсив*
- \`код\`

## Ссылки

- [[index|Вернуться на главную]]
- [[Документация]]

## Код

\`\`\`javascript
function example() {
  console.log("Hello, World!");
}
\`\`\`

---

*Создано для демонстрации*`,

  'Документация.md': `# Документация

## Возможности

### 1. Поддержка Markdown
- Полная поддержка синтаксиса Markdown
- Автоматическое рендеринг ссылок
- Поддержка кода и блоков

### 2. Wiki-ссылки
- Поддержка синтаксиса \`[[Ссылка]]\`
- Автоматическая навигация между страницами
- Обработка специальных символов в именах

### 3. Темы
- Светлая и темная тема
- Автоматическое сохранение выбора
- Адаптивные цвета для ссылок

### 4. Навигация
- Хлебные крошки для иерархической навигации
- Кнопка обновления
- Быстрый переход на главную

## Настройка

1. Откройте настройки
2. Укажите URL вашего WebDAV сервера
3. Введите учетные данные
4. Сохраните настройки

---

*Документация будет обновляться по мере развития проекта*`,

  'Настройки.md': `# Настройки

## Конфигурация

### WebDAV URL
Укажите URL вашего WebDAV сервера. Например:
\`https://example.com/webdav/bookmarks/\`

### Аутентификация
- **Username**: Ваше имя пользователя
- **Password**: Ваш пароль

### Тема
- **Светлая**: Классический белый фон
- **Темная**: Современный темный интерфейс

## Примеры URL

- \`file://C:/Users/username/bookmarks\` - локальная папка
- \`https://server.com/webdav/bookmarks/\` - удаленный сервер
- \`https://username:password@server.com/webdav/\` - с авторизацией

## Безопасность

- Пароли сохраняются локально в браузере
- Соединения с WebDAV серверами защищены
- Данные не передаются третьим лицам

---

*Настройки сохраняются автоматически*`
};

// Mock fetch for file:// URLs
const originalFetch = window.fetch;
window.fetch = function(url, options = {}) {
  // Check if it's a file:// URL
  if (url.startsWith('file://')) {
    // Extract filename from URL
    const urlParts = url.split('/');
    const filename = urlParts[urlParts.length - 1];
    
    // Return mock content
    if (mockFiles[filename]) {
      return Promise.resolve({
        ok: true,
        text: () => Promise.resolve(mockFiles[filename]),
        status: 200
      });
    } else {
      return Promise.resolve({
        ok: false,
        text: () => Promise.resolve(`File not found: ${filename}`),
        status: 404
      });
    }
  }
  
  // For other URLs, use original fetch
  return originalFetch(url, options);
};
