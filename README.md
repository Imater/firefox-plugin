# Obsidian Daily Bookmarks for Chrome

Плагин позволяет отображать панель Избранных ссылок и изменять ссылки. Также она поддерживает ежедневные заметки с календарем. Ваши данные хранятся только локально и только в вашем Obsidian.

## Основные функции

- Отображение панели избранных ссылок из Obsidian
- Поддержка ежедневных заметок с календарем
- Навигация по wiki-ссылкам
- Открытие внешних ссылок в новых вкладках
- Автоматическое обновление вкладок
- **Многоязычная поддержка** (Русский, Английский, Китайский)
- **Настраиваемое начало недели** (воскресенье или понедельник)

## Автоматическое обновление вкладок

### Описание
При клике на ссылку, которая уже открыта в другой вкладке, система автоматически обновит содержимое вкладки, если она была загружена более 15 минут назад (настраивается).

### Как это работает
1. При создании новой вкладки сохраняется время её создания
2. При активации существующей вкладки проверяется время последнего доступа
3. Если прошло больше настроенного времени (по умолчанию 15 минут), вкладка автоматически обновляется
4. Время последнего доступа обновляется при каждой активации вкладки

### Настройки
В разделе настроек можно изменить время обновления вкладок:
- **Время обновления вкладок (минуты)**: от 1 до 1440 минут (24 часа)
- По умолчанию: 15 минут

### Технические детали
- Время доступа к вкладкам хранится в `chrome.storage.local`
- Автоматическая очистка записей о закрытых вкладках
- Поддержка настраиваемого времени обновления

## Многоязычная поддержка

Плагин поддерживает три языка:
- **Русский** - для русскоязычных пользователей
- **English** - для англоязычных пользователей  
- **中文** - для китайскоязычных пользователей

### Настройка языка
1. Откройте настройки плагина
2. В разделе "Общие настройки" выберите нужный язык
3. Изменения применяются мгновенно

### Настройка начала недели
Вы можете выбрать, с какого дня должна начинаться неделя:
- **Понедельник** - стандартный для большинства стран
- **Воскресенье** - используется в некоторых странах

Эта настройка влияет на отображение календаря и определение выходных дней.

## Установка и использование

1. Клонируйте репозиторий
2. Установите зависимости: `yarn install`
3. Соберите проект: `yarn build`
4. Загрузите расширение в Firefox

## Структура проекта

```
src/
├── services/
│   ├── tabService.js      # Управление вкладками и их обновлением
│   └── pageService.js     # Загрузка страниц из WebDAV
├── components/
│   ├── Settings.js        # Настройки приложения
│   └── ...
├── hooks/
│   ├── useSettings.js     # Хук для работы с настройками
│   └── ...
└── ...
```

## API

### tabService.js

#### `activateOrCreateTab(url)`
Активирует существующую вкладку или создает новую. Автоматически обновляет вкладку, если прошло больше настроенного времени.

#### `cleanupClosedTabs()`
Очищает записи о закрытых вкладках из хранилища.

#### `shouldRefreshTab(lastAccessed)`
Проверяет, нужно ли обновить вкладку на основе времени последнего доступа.

## Лицензия

MIT
