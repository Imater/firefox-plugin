# Firefox Plugin - WebDAV Bookmarks

Расширение для Firefox, которое предоставляет боковую панель для работы с закладками WebDAV.

## Основные функции

- Отображение markdown файлов из WebDAV хранилища
- Навигация по wiki-ссылкам
- Открытие внешних ссылок в новых вкладках
- **Автоматическое обновление вкладок** (новая функция)

## Автоматическое обновление вкладок

### Описание
При клике на ссылку, которая уже открыта в другой вкладке, система автоматически обновит содержимое вкладки, если она была загружена более 15 минут назад (настраивается).

### Как это работает
1. При создании новой вкладки сохраняется время её создания
2. При активации существующей вкладки проверяется время последнего доступа
3. Если прошло больше настроенного времени (по умолчанию 15 минут), вкладка автоматически обновляется
4. Время последнего доступа обновляется при каждой активации вкладки

### Настройки
В разделе настроек можно изменить время обновления вкладок:
- **Время обновления вкладок (минуты)**: от 1 до 1440 минут (24 часа)
- По умолчанию: 15 минут

### Технические детали
- Время доступа к вкладкам хранится в `chrome.storage.local`
- Автоматическая очистка записей о закрытых вкладках
- Поддержка настраиваемого времени обновления

## Установка и использование

1. Клонируйте репозиторий
2. Установите зависимости: `yarn install`
3. Соберите проект: `yarn build`
4. Загрузите расширение в Firefox

## Структура проекта

```
src/
├── services/
│   ├── tabService.js      # Управление вкладками и их обновлением
│   └── pageService.js     # Загрузка страниц из WebDAV
├── components/
│   ├── Settings.js        # Настройки приложения
│   └── ...
├── hooks/
│   ├── useSettings.js     # Хук для работы с настройками
│   └── ...
└── ...
```

## API

### tabService.js

#### `activateOrCreateTab(url)`
Активирует существующую вкладку или создает новую. Автоматически обновляет вкладку, если прошло больше настроенного времени.

#### `cleanupClosedTabs()`
Очищает записи о закрытых вкладках из хранилища.

#### `shouldRefreshTab(lastAccessed)`
Проверяет, нужно ли обновить вкладку на основе времени последнего доступа.

## Лицензия

MIT
